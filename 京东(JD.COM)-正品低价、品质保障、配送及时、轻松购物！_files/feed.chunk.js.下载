(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"/Na2":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TempLates=t.LayerContainer=void 0,n("rE2o"),n("ioFf"),n("/SS/"),n("dRSK"),n("VRzm"),n("yt8O"),n("rGqo");var o=_interopRequireDefault(n("vDqi")),i=_interopRequireDefault(n("aP5i")),r=_interopRequireDefault(n("fIwX")),a=n("szSY");function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var s=function(e){function TempLates(e){var t;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TempLates),function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(_assertThisInitialized(_assertThisInitialized(t=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(TempLates).call(this,e)))),"finalData",[]),t.state={templatesData:[]},t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(TempLates,i["default"].Component),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(TempLates,[{key:"getInitData",value:function getInitData(){var e=this,t=this.props,n=t.templateStyles,i=t.templateBindingDatas,r=[];n.forEach(function(e){r.push(o["default"].get(e.cdnUrl))}),Promise.all(r).then(function(t){t.forEach(function(t){var n=t.data.id,o=i.find(function(e){return e.templateId==n});t.data.layers.forEach(function(e){"TEXT"==e.type&&o.layerBindingDatas[e.id]&&(e.text=o.layerBindingDatas[e.id].text,""==e.text.join("")&&(t.data.hideAllLayers=!0,(0,a.reportDraError)("b","浮层存在空值，不显示",{templateId:n,layerId:e.id})))}),e.finalData.push(t.data),e.setState({templatesData:e.finalData})})})["catch"](function(e){console.log(e),(0,a.reportDraError)("n","浮层获取模板失败",{error:JSON.stringify(e),params:JSON.stringify(n)})})}},{key:"componentDidMount",value:function componentDidMount(){this.getInitData()}},{key:"render",value:function render(){return 0===this.state.templatesData.length?null:i["default"].createElement("span",null,this.state.templatesData.map(function(e){if(!e.hideAllLayers||1!=e.hideAllLayers)return e.layers.map(function(e){return i["default"].createElement(r["default"],e)})}))}}]),TempLates}();t.TempLates=s;t.LayerContainer=function LayerContainer(e){var t=e.isWide?230:190,n=e.floatData,o=t/800;return e.needLayer&&n?i["default"].createElement("div",null,i["default"].createElement("img",{style:{height:t,width:t},src:e.src,alt:e.t}),i["default"].createElement("div",{id:"sku-".concat(e.sku,"-layer-container"),style:{position:"relative",width:800,height:800,marginTop:-t,transformOrigin:"0 0",transform:"scale(".concat(o,")")}},i["default"].createElement(s,n))):i["default"].createElement("img",{style:{height:t,width:t},src:e.src,alt:e.t})}},"1u2O":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,n("rE2o"),n("ioFf"),n("rGqo"),n("yt8O"),n("RW0V"),n("91GP"),n("/SS/"),n("KKXr"),n("pIFo");var o=_interopRequireDefault(n("aP5i")),i=_interopRequireDefault(n("CSDR")),r=_interopRequireDefault(n("L6Ds")),a=n("1BlJ"),s=n("n5if"),l=n("szSY"),c=n("Ykg6"),u=n("/Na2");function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){_defineProperty(e,t,n[t])})}return e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){function GoodsItem(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,GoodsItem);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return _possibleConstructorReturn(n,(t=n=_possibleConstructorReturn(this,(e=_getPrototypeOf(GoodsItem)).call.apply(e,[this].concat(i))),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"isSkuSelf",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"poi",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"poiSuffix",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"url",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"extColumns",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"lazyLoaded",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"sendImpr",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"renderCount",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"dom",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"enableHoverShow",function(){-1===n.dom.className.indexOf("hover-on")&&(n.dom.className+=" hover-on")}),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"cancelHoverShow",function(){-1!==n.dom.className.indexOf("hover-on")&&(n.dom.className=n.dom.className.replace("hover-on",""))}),t))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(GoodsItem,o["default"].PureComponent),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(GoodsItem,[{key:"componentDidMount",value:function componentDidMount(){this.enableHoverShow()}},{key:"getPriceDOM",value:function getPriceDOM(){var e=this.props,t=e.yuShouHidePrice,n=e.price,i=e.tpp,r=e.yuYueHidePrice,a=e.priceReady,s=e.nup;if(this.renderCount=(this.renderCount||0)+1,a){if(r||t)return o["default"].createElement("div",{className:"more2_info_price"},o["default"].createElement("div",{className:"mod_price"},o["default"].createElement("i",null,"¥"),o["default"].createElement("span",{className:"more2_info_price_tip"},"待发布")));if(n){var l="00";return n.split(".")[1]&&(l=1==n.split(".")[1].length?n.split(".")[1]+"0":n.split(".")[1]),i?o["default"].createElement("div",{className:"more2_info_price more2_info_price_plus more2_info_price_newcomer"},o["default"].createElement("div",{className:"mod_price"},o["default"].createElement("i",null,"¥"),o["default"].createElement("span",{className:"more2_info_price_txt"},n.split(".")[0]+".",o["default"].createElement("span",{className:"more2_info_price_txt-decimal"},l))),n.length<8&&o["default"].createElement("div",{className:"more2_price_plus"},o["default"].createElement("div",{className:"mod_price"},o["default"].createElement("i",null,"¥"),o["default"].createElement("span",{className:"more2_info_price_txt"},i)),o["default"].createElement("i",{className:"more2_price_plus_ico"}))):s?o["default"].createElement("div",{className:"more2_info_price more2_info_price_plus more2_info_price_newcomer"},o["default"].createElement("div",{className:"mod_price"},o["default"].createElement("i",null,"¥"),o["default"].createElement("span",{className:"more2_info_price_txt"},n.split(".")[0]+".",o["default"].createElement("span",{className:"more2_info_price_txt-decimal"},l))),o["default"].createElement("div",{className:"more2_price_newcomer"},o["default"].createElement("div",{className:"mod_price"},o["default"].createElement("i",null,"¥"),o["default"].createElement("span",{className:"more2_info_price_txt"},s)),o["default"].createElement("i",{className:"more2_price_newcomer_ico"}))):o["default"].createElement("div",{className:"more2_info_price more2_info_price_plus more2_info_price_newcomer"},o["default"].createElement("div",{className:"mod_price"},o["default"].createElement("i",null,"¥"),o["default"].createElement("span",{className:"more2_info_price_txt"},n.split(".")[0]+".",o["default"].createElement("span",{className:"more2_info_price_txt-decimal"},l))))}}}},{key:"render",value:function render(){var e=this,t=this.props,n=t.sku,r=t.img,f=t.t,d=t.k,p=t.originIndex,_=t.source,m=t.clk,y=t.isMore,h=t.deletable,g=t.extendable,b=t.deleteOne,v=t.priceAllReady,P=t.isChosen,T=(t.isJxzy,t.isNewJxzy),O=t.moreIdx,E=t.moreFromIdx,S=t.poi,I=t.ext_columns,w=t.hasCoupon,C=t.promote,N=t.price,j=t.tpp,x=t.nup,k=t.isOverseaPurchase,D=t.client_exposal_url,z=t.extension_id,R=t.__nervkey,L=t.isWide,A=t.isHiddenSelfOperator,M=t.isSelfSku,G=t.floatLayerData,F=t.tailTag,J=M&&!A,Y="".concat(S,"#pd"),H=(0,l.padding)((p||d)+1,3);y&&(H="".concat((0,l.padding)(E+1,3),"-").concat((0,l.padding)(O+1,2)));var q="//item.jd.com/".concat(n,".html"),U=I||{},B=w?"02":C?"01":"null",V={0:"02",1:"01"}[_]||"02";return U.desc="null#".concat(V,"#").concat(J?"01":"02","#").concat(B,"#").concat(N,"#").concat(j?"01":x?"02":"null","#").concat(z||"null"),o["default"].createElement("li",{className:"more2_item more2_item_good",key:"g_".concat(R),onMouseLeave:this.enableHoverShow,ref:function ref(t){return e.dom=t}},o["default"].createElement(i["default"],_extends({},c.LAZYIMPROPTS,{placeholderClassName:"o2_impr",onLoad:function onLoad(){D&&(0,a.sendImageLog)(D,"1"!==_)}})),"1"===_&&o["default"].createElement("span",{className:"more2_item_gdot"}),o["default"].createElement("a",{className:"more2_lk",href:q,target:"_blank",title:f,"aria-label":f,clstag:"".concat(c.CLSTAGPREFIX).concat(Y,"_").concat(H).concat(y?"":"-a"),onClick:function onClick(){(0,s.reportClick)(_objectSpread({text:"".concat(n),url:q},U,{poi:"".concat(Y,"|").concat(H).concat(y?"":"-a")})),m&&(0,a.sendImageLog)(m)}},o["default"].createElement("div",{className:"more2_img"},o["default"].createElement(u.LayerContainer,{needLayer:g&&1==window.imageLayerSwitch,sku:n,src:r,alt:f,isWide:L,floatData:G})),o["default"].createElement("div",{className:"more2_info"},o["default"].createElement("p",{className:"more2_info_name"},v&&(T?o["default"].createElement("i",{className:"more2_new_jxzy"}):P?o["default"].createElement("i",{className:"more2_info_chosen"}):k&&"0"!==k?o["default"].createElement("i",{className:"more2_international"}):J&&o["default"].createElement("i",{className:"more2_info_self"},"自营")),f),o["default"].createElement("div",{className:"more2_tail_tags"},F&&F.iconList2&&F.iconList2.length>0&&o["default"].createElement("div",null,F.iconList2.map(function(e,t){return e.imgUrl?o["default"].createElement("img",{key:t,className:"more2_tail_tag_img",src:e.imgUrl}):o["default"].createElement("i",{key:t,className:"more2_tail_tag",style:{backgroundColor:"".concat(e.backgroundColor),color:"".concat(e.color),borderColor:"".concat(e.borderColor)}},e.text)}))),this.getPriceDOM()),(g||h)&&o["default"].createElement("div",{className:"more2_item_hover"},h&&o["default"].createElement("div",{className:"more2_item_delete",clstag:"".concat(c.CLSTAGPREFIX,"|").concat(Y,"_").concat(H,"-b"),title:"不喜欢",onClick:function onClick(t){t.stopPropagation(),t.preventDefault(),h&&(b(),(0,s.reportClick)(_objectSpread({},U,{poi:"".concat(Y,"|").concat(H,"-b"),text:"".concat(n),url:q})),e.cancelHoverShow())}}))))}}]),GoodsItem}(),d=(0,r["default"])(f);t["default"]=d},"64dS":function(e,t,n){},Br24:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=t.ContentType=void 0,n("rE2o"),n("ioFf"),n("91GP"),n("rGqo"),n("yt8O"),n("RW0V"),n("/SS/");var o,i=_interopRequireDefault(n("aP5i")),r=_interopRequireDefault(n("oP/V")),a=n("Ykg6"),s=n("Vn4U"),l=n("szSY"),c=_interopRequireDefault(n("S+ax")),u=n("n5if"),f=_interopRequireDefault(n("CSDR")),d=_interopRequireDefault(n("mreV")),p=n("SjJ/");function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){_defineProperty(e,t,n[t])})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}n("wP27"),t.ContentType=o,function(e){e.SHOP="SHOP",e.JOY="JOY",e.INVENTORY="INVENTORY",e.HOTWORDS="HOTWORDS",e.VIDEO="VIDEO"}(o||(t.ContentType=o={}));var _=function(e){function Content(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Content),_possibleConstructorReturn(this,_getPrototypeOf(Content).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Content,i["default"].Component),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(Content,[{key:"render",value:function render(){var e,t,n=this.props,_=n.type,m=n.data,y=n.k,h=n.originIndex,g=n.poi,b=n.__nervkey,v=(0,l.padding)((h||y)+1,3);switch(_){case o.SHOP:e={title:m.shopName,img:(0,c["default"])(m.shopPicUrl),follows:function countFollow(e){if((e=String(e)).length>8){var t=e.length-8;return"".concat(e.slice(0,t),".").concat(e.substr(t,1),"亿")}if(e.length>4){var n=e.length-4;return"".concat(e.slice(0,n),".").concat(e.substr(n,1),"万")}return e}(m.followCount),url:"".concat(s.NICE_SHOP,"?shopid=").concat(m.shopId,"&sid=").concat(m.groupId,"&skus=").concat(m.skuId,"&source=pcfeeds"),logPoi:"".concat(g,"#shop|").concat(v),logDesc:"".concat(m.groupId,"-").concat(m.shopId,"-").concat("1"==m.isSelfOperated?"01":"02","-").concat(m.skuId,"-").concat(m.dsr,"-").concat(m.followCount,"-").concat(m.scn),logText:"还没逛够-店铺-".concat(m.shopName,"-").concat(m.skuId),clstag:"".concat(a.CLSTAGPREFIX).concat(g,"#shop_").concat(v)};break;case o.JOY:e={title:m.title,img:(0,c["default"])("//m.360buyimg.com/img/".concat(m.prodList[0]),_objectSpread({},p.hdImageOpts)),desc:m.subTitle,url:"".concat(s.JOY,"?itemid=").concat(m.itemid,"&babelChannel=").concat(m.deliveryId,"&activityId=").concat(m.activityId,"&linkIds=").concat(m.skuList.join(","),"&source=06"),logPoi:"".concat(g,"#joy|").concat(v),logDesc:"".concat(m.itemid,"-").concat(m.deliveryId,"-").concat(m.skuList.join(",")),logText:"还没逛够-JOY寻宝-".concat(m.title,"-").concat(m.skuList.join(",")),clstag:"".concat(a.CLSTAGPREFIX).concat(g,"#joy|").concat(v)};break;case o.INVENTORY:try{t=JSON.parse(m.summary)}catch(E){t=[]}e={title:m.mainTitle,img:(0,c["default"])("//m.360buyimg.com/".concat(t[0]),_objectSpread({},p.hdImageOpts)),desc:m.description,url:"".concat(s.DAILY,"/album.html?id=").concat(m.id,"&modelType=inventory&source=pcfeeds"),logPoi:"".concat(g,"#cl|").concat(v),logDesc:m.id,logText:"".concat(m.mainTitle,"-").concat(m.skuIds),clstag:"".concat(a.CLSTAGPREFIX).concat(g,"#cl_").concat(v)};break;case o.VIDEO:e={title:m.title,img:(0,c["default"])(m.indexImage),url:"".concat(s.VIDEO,"?id=").concat(m.id),logPoi:"".concat(g,"#vv|").concat(v),logDesc:m.vid,logText:m.title,clstag:"".concat(a.CLSTAGPREFIX).concat(g,"#vv_").concat(v)}}var P={content:(0,r["default"])(["feed-content"],_defineProperty({},"feed-content--".concat(_.toLowerCase()),!0)),contentTitle:(0,r["default"])("feed-content__title",{"feed-content__title--twoline":_==o.VIDEO||_==o.SHOP}),imgWrapper:(0,r["default"])("feed-content__img-wrapper",{"feed-content__img-wrapper--video":_==o.VIDEO})};if("HOTWORDS"==_){var T=m.list?m.list.slice(0,8):[];(0,u.reportExpose)(_objectSpread({poi:"".concat(g,"#search|").concat(v),text:T.map(function(e){return e.keyword}).join("-")},m.ext_columns))}if("SHOP"===_){var O=m.shopId;m.isSelfOperated=(0,l.checkIsHiddenSelfOperator)(O)?"0":m.isSelfOperated}return i["default"].createElement("li",{className:P.content},p.CONTENT_DATA[_]&&i["default"].createElement("a",{className:"feed-content__link",href:"".concat(e.url),title:e.title,"aria-label":e.title,clstag:e.clstag,target:"_blank",onClick:function onClick(){(0,u.reportClick)(_objectSpread({poi:e.logPoi},m.ext_columns,{desc:e.logDesc,text:e.logText,url:e.url}))}},i["default"].createElement("div",{className:P.imgWrapper},i["default"].createElement(f["default"],_extends({},a.LAZYIMGOPTS,{onLoad:function onLoad(){(0,u.reportExpose)(_objectSpread({},m.ext_columns,{poi:e.logPoi,desc:e.logDesc,text:e.logText,url:e.url}))}}),i["default"].createElement(d["default"],{className:"feed-content__img",alt:e.title,src:e.img})),_==o.VIDEO&&i["default"].createElement("div",{className:"feed-content__img--video"})),i["default"].createElement("div",{className:"feed-content__wrapper"},i["default"].createElement("div",{className:"feed-content__tags"},p.CONTENT_DATA[_]&&i["default"].createElement("span",{className:"feed-content__tag"},_==o.SHOP&&"1"==m.isSelfOperated?"自营":p.CONTENT_DATA[_].tag),_==o.SHOP&&i["default"].createElement("span",{className:"feed-content__tag-follows"},e.follows,"人关注")),i["default"].createElement("div",{className:P.contentTitle},e.title),(_==o.INVENTORY||_==o.JOY)&&i["default"].createElement("div",{className:"feed-content__desc"},e.desc),i["default"].createElement("div",{className:"feed-content__btn"},i["default"].createElement("span",null,p.CONTENT_DATA[_].btn)))),"HOTWORDS"==_&&i["default"].createElement("div",null,i["default"].createElement("p",{className:"feed-content__head"},"精选热点"),i["default"].createElement("ul",{className:"feed-content__list"},m.list&&m.list.map(function(e,t){var n="//search.jd.com/Search?keyword=".concat(encodeURIComponent(e.text),"&enc=utf-8");return i["default"].createElement("li",{key:"s_".concat(b),className:"feed-content__list-item"},i["default"].createElement("a",{className:"feed-content__list-link",title:e.text,"aria-label":e.text,href:n,target:"_blank",clstag:"".concat(a.CLSTAGPREFIX).concat(g,"#search_").concat(v,"-0").concat(t+1),onClick:function onClick(o){(0,u.reportClick)(_objectSpread({},e.ext_columns,{poi:"".concat(g,"#search|").concat(v,"-0").concat(t+1),url:n,text:e.text}))}},e.text))}))))}}]),Content}();t["default"]=_},"SjJ/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hdImageOpts=t.CONTENT_DATA=t.TAB_DATA=t.isContItemInvalid=t.CONT_TYPES=t.CTN_INTERVAL=t.CTN_ORDER=t.ALLOW_EMPTY_PAGE_COUNT=t.MORE_PAGE_SUM=t.PAGE_NUMS=t.SKU_VIDEO=t.FETCH_PAGE_INTERVAL=t.SOURCE_RECOMMEND=t.SOURCE_AD=void 0,n("rGqo"),n("yt8O"),n("RW0V");t.SOURCE_AD="1";t.SOURCE_RECOMMEND="0";t.FETCH_PAGE_INTERVAL=50;t.SKU_VIDEO=10;t.PAGE_NUMS=25;t.MORE_PAGE_SUM=10;t.ALLOW_EMPTY_PAGE_COUNT=3;t.CTN_ORDER=[4,-1,0,-1,2,-1];t.CTN_INTERVAL=2;var o=["VIDEO","SHOP","INVENTORY","HOTWORDS","JOY"];t.CONT_TYPES=o;t.isContItemInvalid=function isContItemInvalid(e){return!e||-1===o.indexOf(e.type)||null==e.data||0==Object.keys(e.data).length||Array.isArray(e.data)&&0===e.data.length};t.TAB_DATA=[{title:"精选",subtitle:"猜你喜欢",type:"",poi:"01"},{title:"智能先锋",subtitle:"大电器城",type:"1",poi:"02"},{title:"居家优品",subtitle:"品质生活",type:"3",poi:"03"},{title:"超市百货",subtitle:"百货生鲜",type:"4",poi:"04"},{title:"时尚达人",subtitle:"美妆穿搭",type:"2",poi:"05"},{title:"进口好物",subtitle:"京东国际",type:"5",poi:"06"}];t.CONTENT_DATA={SHOP:{tag:"京东好店",btn:"逛好店"},JOY:{tag:"80款商品",btn:"JOY寻宝"},INVENTORY:{tag:"清单",btn:"会买专辑"},VIDEO:{tag:"视频",btn:"发现"}};t.hdImageOpts={resize:["300x300","150x150"],clip:"150x150"}},"Smr/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,n("HEwt"),n("a1Th"),n("h7Nl"),n("RW0V"),n("rE2o"),n("ioFf"),n("/SS/"),n("f3/d"),n("91GP"),n("xfY5"),n("KKXr"),n("yt8O"),n("rGqo"),n("VRzm");var o=_interopRequireDefault(n("aP5i")),i=_interopRequireDefault(n("aP5i")),r=_interopRequireDefault(n("qF34")),a=_interopRequireWildcard(n("fXtb")),s=n("I0BZ"),l=n("szSY"),c=_interopRequireDefault(n("S+ax")),u=_interopRequireDefault(n("7xuk")),f=_interopRequireDefault(n("vZHt")),d=n("R1gS"),p=_interopRequireWildcard(n("8T6v")),_=n("1BlJ"),m=n("n5if"),y=_interopRequireDefault(n("pHFl")),h=_interopRequireDefault(n("Yfql")),g=_interopRequireDefault(n("4UAg")),b=_interopRequireDefault(n("1u2O")),v=_interopRequireDefault(n("Br24")),P=n("/Na2"),T=_interopRequireDefault(n("q63S")),O=n("SjJ/");n("aufm"),n("64dS");var E=_interopRequireDefault(n("p46w")),S=_interopRequireDefault(n("k6LS"));function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};o.get||o.set?Object.defineProperty(t,n,o):t[n]=e[n]}return t["default"]=e,t}function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){_defineProperty(e,t,n[t])})}return e}function _slicedToArray(e,t){return function _arrayWithHoles(e){if(Array.isArray(e))return e}(e)||function _iterableToArrayLimit(e,t){var n=[],o=!0,i=!1,r=undefined;try{for(var a,s=e[Symbol.iterator]();!(o=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(l){i=!0,r=l}finally{try{o||null==s["return"]||s["return"]()}finally{if(i)throw r}}return n}(e,t)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=0,w=0,C=function(e){function Feed(e){var t;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Feed),_defineProperty(_assertThisInitialized(_assertThisInitialized(t=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(Feed).call(this,e)))),"moreNode",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"tabNode",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"storeContList",[]),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"actPageNum",0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"pageSize",25),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"pageNum",1),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"failedCnt",0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"domInfo",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"goodImageOpts",{resize:["460x460","230x230"],webp:!0}),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"storeRecommendGoodList",[]),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"storeAdGoodList",[]),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"_onScroll",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"cnt",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"isBusy",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"goodPageNum",0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"_storeGoodsForDuplidate",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"duplidateCounterMap",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"gPage",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"tabOffsetTop",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"goodsDataCache",{1:{pageIndex:1,list:[]},2:{pageIndex:1,list:[]},3:{pageIndex:1,list:[]},4:{pageIndex:1,list:[]},5:{pageIndex:1,list:[]},6:{pageIndex:1,list:[]}}),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"floatsDataList",[]),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"type",""),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"onResize",function(){I=window.innerHeight,t.refreshDomInfo(),t.onScroll()}),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"calculatePagePosInfo",function(e){var n=t.getCtxCount(e),o=t.storeContList.slice(0,n).filter(O.isContItemInvalid).length,i=n-o,r=Math.round(.4*(25-i));return{ctxCount:n,ctxNullCount:o,adCount:r,recommendCount:25-r-i,realCtxCount:i}}),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"getCtxCount",function(e){for(var t=0,n=e-1,o=5*n;o<5*(n+1);o++)o%O.CTN_INTERVAL==0&&t++;return t}),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"getCtxOrder",function(e,t){return O.CTN_ORDER[(5*(e-1)+t)%O.CTN_ORDER.length]}),t.state={hide:!1,list:[],tabList:[],tabIdx:0,cursor:0,isLoadingFirst:!0,isSkusBackup:!1,isLoadComplete:!1,type:"",showFixTab:!1,isTabLoading:!1},t._onScroll=t.onScroll.bind(_assertThisInitialized(_assertThisInitialized(t))),t.onScroll=(0,l.throttle)(t._onScroll,200),t.bindEvent=t.bindEvent.bind(_assertThisInitialized(_assertThisInitialized(t))),t.refreshDomInfo=t.refreshDomInfo.bind(_assertThisInitialized(_assertThisInitialized(t))),t.collectPageData=t.collectPageData.bind(_assertThisInitialized(_assertThisInitialized(t))),t.loadPage=t.loadPage.bind(_assertThisInitialized(_assertThisInitialized(t))),t.cnt=0,t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Feed,o["default"].Component),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(Feed,[{key:"componentDidMount",value:function componentDidMount(){this.bindEvent()}},{key:"bindEvent",value:function bindEvent(){this.refreshDomInfo(),window.addEventListener("scroll",this.onScroll),window.addEventListener("resize",this.onResize),this.onResize()}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize)}},{key:"onScroll",value:function onScroll(){if(w=window.pageYOffset,this.tabNode&&this.tabNode.vnode){var e=(0,s.getElementPosByParent)(this.tabNode.vnode.dom);if(!e)return;this.tabOffsetTop=e.top,w>e.top+e.height?this.state.showFixTab||this.setState({showFixTab:!0}):this.state.showFixTab&&this.setState({showFixTab:!1})}if(!(this.state.list&&this.state.list.length&&w+I<this.domInfo.top+this.domInfo.height-540)){var t=this.state.type;if(""==t){var n=this.state,o=n.hide,i=n.isSkusBackup,r=n.isLoadComplete;if(o||i||r)return;if((0,l.isDebug)("feed",["single"])&&this.pageNum>1)return void this.setState({isLoadComplete:!0});if(this.pageNum>O.MORE_PAGE_SUM)return;this.loadPage()}else if(!this.goodsDataCache[t].loadComplete){if(this.goodsDataCache[t].loading)return;this.loadTabPageData(t)}}}},{key:"refreshDomInfo",value:function refreshDomInfo(){this.moreNode&&(this.domInfo=(0,s.getElementPosByParent)(this.moreNode))}},{key:"loadPage",value:function loadPage(){var e=this;return this.isBusy?Promise.resolve():(this.isBusy=!0,this.prepareData().then(this.collectPageData).then(function(t){if(t&&0!==t.length){e.failedCnt=0;for(var n=e.state.list.concat(t),o=n.filter(function(e){return!e.isMore}),i={},s=0;s<o.length;s++)i[o[s].__nervkey]=s;n.forEach(function(e){e.originIndex=i[e.__nervkey]}),e.setState({list:n,cursor:e.state.list.length+e.pageSize,isLoadingFirst:!1,loaded:!0,isLoadComplete:e.pageNum>=O.MORE_PAGE_SUM},function(){e.refreshDomInfo(),1==e.pageNum&&(0,m.reportExpose)({poi:"feed|all|null"}),setTimeout(function(){e.pageNum++,e.isBusy=!1,e._onScroll()},O.FETCH_PAGE_INTERVAL)})}else{e.isBusy=!1;var l=!e.state.list||!e.state.list.length;if(e.failedCnt++>=3)return e.setState({isLoadComplete:!0,loaded:!0,hide:l}),l&&a["default"].umpBiz({bizid:a.BIZ_HIDDEN,operation:7,result:1}),void(window.jmfe&&window.jmfe.jsagentReport(window.jmfe.JSAGENT_EXCEPTION_TYPE.business,251,"feed流 失败多次 隐藏",{fid:"pc_home_feed",isHide:l,failedCnt:e.failedCnt}));if(e.goodPageNum>O.ALLOW_EMPTY_PAGE_COUNT&&(!e.state.list||!e.state.list.length)){r["default"].error("前".concat(O.ALLOW_EMPTY_PAGE_COUNT,"页数据为空，隐藏楼层")),e.setState({hide:!0}),window.jmfe&&window.jmfe.jsagentReport(window.jmfe.JSAGENT_EXCEPTION_TYPE.business,251,"feed流 前多页数据为空，隐藏楼层 隐藏",{fid:"pc_home_feed",isHide:l}),a["default"].umpBiz({bizid:a.BIZ_HIDDEN,operation:7,result:2});var c=e.props.onError;return void(c&&c(new Error("前".concat(O.ALLOW_EMPTY_PAGE_COUNT,"页数据为空，隐藏楼层"))))}setTimeout(e._onScroll,O.FETCH_PAGE_INTERVAL)}},function(t){r["default"].error(t),e.isBusy=!1,1===e.pageNum&&(window.jmfe&&window.jmfe.jsagentReport(window.jmfe.JSAGENT_EXCEPTION_TYPE.business,251,"feed流 取数据失败，隐藏楼层 隐藏",{fid:"pc_home_feed",error:t}),a["default"].umpBiz({bizid:a.BIZ_HIDDEN,operation:7,result:3}),e.setState({hide:!0}))}))}},{key:"prepareData",value:function prepareData(){var e=this;return Promise.all([this.requestSkus(),this.requestOthers()]).then(function(t){var n=_slicedToArray(t,2),o=n[0],i=n[1];o&&o.length&&(e.normalizeGoodList(o),o.forEach(function(t){t.source===O.SOURCE_AD?e.storeAdGoodList.push(t):t.source===O.SOURCE_RECOMMEND&&e.storeRecommendGoodList.push(t)})),i&&i.data&&(e.normalizeContList(i.data),e.storeContList=e.storeContList.concat(i.data))})["catch"](function(e){r["default"].error(e)})}},{key:"normalizeGoodList",value:function normalizeGoodList(e){var t=this;e&&e.forEach(function(e,n){e.type="good",e.url="//item.jd.com/".concat(e.sku,".html"),e.img=(0,c["default"])("//m.360buyimg.com/jdcms/".concat(e.img),_objectSpread({},t.goodImageOpts)),e.extendable=!0,e.deletable=!0,e.isReplace=!1,e.__nervkey=String(Math.random()).split(".")[1]+n+t.cnt++}),r["default"].log("normalizeGoodList: 页码：".concat(this.goodPageNum," 条数：").concat(e.length," 广告：").concat(e.filter(function(e){return e.source===O.SOURCE_AD}).length,", 推荐：").concat(e.filter(function(e){return e.source===O.SOURCE_RECOMMEND}).length))}},{key:"normalizeContList",value:function normalizeContList(e){var t=this;e&&e.forEach(function(e,n){e.__nervkey=String(Math.random()).split(".")[1]+n+t.cnt++})}},{key:"collectPageData",value:function collectPageData(){var e=this.calculatePagePosInfo(this.pageNum),t=e.adCount,n=e.recommendCount,o=Math.min(t,this.storeAdGoodList.length),i=t+n-o;if(i>this.storeRecommendGoodList.length)return r["default"].error("第".concat(this.pageNum,"页: 数据不够 addCount2:").concat(o," <= storeCount:").concat(this.storeAdGoodList.length,", recommendCount2:").concat(i," <= ").concat(this.storeRecommendGoodList.length)),[];for(var a=[],s=0;s<25;s++)s<2*o?a=s%2==0?a.concat(this.storeAdGoodList.splice(0,1)):a.concat(this.storeRecommendGoodList.splice(0,1)):s<o+i&&(a=a.concat(this.storeRecommendGoodList.splice(0,1)));for(var l=0;l<5;l++){var c=this.getCtxOrder(this.pageNum,l);if(-1!==c){var u=this.storeContList.splice(0,1)[0];(0,O.isContItemInvalid)(u)||a.splice(5*l+c,0,u)}}if(!(a.length<25)){if(25!==a.length)throw new Error("".concat(this.pageNum," 页数量不对 ").concat(a.length));return a.slice(0,25)}this.setState({isLoadComplete:!0})}},{key:"requestSkus",value:function requestSkus(){this.goodPageNum++;var e=this;return new Promise(function(t,n){var o={page:e.goodPageNum,pagesize:e.pageSize,area:f["default"].area,source:"pc-home"},i=(new Date).getTime(),r={appid:"www-jd-com",body:SHA256(JSON.stringify(o)),clientVersion:"1.0.0",client:"pc",functionId:"pc_home_feed",t:i};return window.PSign.sign(r).then(function(r){return(0,u["default"])(p.GATEWAY,{name:"jsonpMore2Goods",speedID:2,umpID:4,params:{h5st:encodeURI(r.h5st),appid:"www-jd-com",body:JSON.stringify(o),clientVersion:"1.0.0",client:"pc",functionId:"pc_home_feed",t:i,uuid:E["default"].get("__jda"),loginType:3},dataCheck:function dataCheck(e){return!!(e.success&&e.data&&e.data.length)||(window.jmfe&&window.jmfe.jsagentReport(window.jmfe.JSAGENT_EXCEPTION_TYPE.business,751,"pc_home_feed 校验失败",{fid:"pc_home_feed",params:JSON.stringify(o)}),!1)}}).then(function(n){if((n.__$$backupCall||n.code)&&(e.setState({isSkusBackup:!0}),e.goodPageNum>1))t([]);else{n.impr&&(0,_.sendImageLog)(n.impr);var o=n.data||[];(n.priceList||[]).forEach(function(t){var n=Number(t.id.substring(2));o.forEach(function(o){o.sku==n&&(o.isExpose=!0,t.p>0?o.price=t.p:o.price=o.jp,t.tpp>0&&(o.tpp=t.tpp),t.nup>0&&(o.nup=t.nup),e.handleReportExpose(o))})});var i=n.yushouFilterSku||{},r=n.productMap||{},a=n.promotionMap||{},s=n.floatLayerList||[];o.forEach(function(e){e.priceAllReady=!0,e.priceReady=!0;var t=String(e.sku),n=i[t];2===n&&(e.yuYueHidePrice=!0),1===n&&(e.yuShouHidePrice=!0);var o=r[t];o&&(e.isSelfSku="1"===o.isSelfSku,e.isChosen="1"===o.IsJX,e.isJxzy="1"===o.isJxzy,e.isNewJxzy="3"===o.gxlysplx,e.isOverseaPurchase=o.isOverseaPurchase,e.isHiddenSelfOperator=(0,l.checkIsHiddenSelfOperator)(o.shop_id));var c=a[t];c&&(e.tailTag=c),s.forEach(function(n){n.skuId==t&&(e.floatLayerData=n)})}),t(o)}})["catch"](function(e){window.jmfe&&window.jmfe.jsagentReport(window.jmfe.JSAGENT_EXCEPTION_TYPE.net,751,"首页Feed接口请求失败",{fid:"pc_home_feed",params:JSON.stringify(o)}),n(e)})})})}},{key:"requestOthers",value:function requestOthers(){if(!(this.actPageNum++>=1))return(0,S["default"])({functionId:"pc_home_feed_other",name:"jsonpMore2Others",params:{pin:f["default"].pin,uuid:f["default"].uuid,jda:f["default"].jda,num:this.actPageNum,source:"pc-home"},backup:[p.MORE2_OTHERS_BACKUP,p.MORE2_OTHERS_BACKUP1]})}},{key:"resumeLayers",value:function resumeLayers(){1==window.imageLayerSwitch&&this.floatsDataList.forEach(function(e){setTimeout(function(){i["default"].render(o["default"].createElement(P.TempLates,e),document.getElementById("sku-".concat(e.skuId,"-layer-container")))},1e3)})}},{key:"getLayers",value:function getLayers(e,t){var n=this;if(1==window.imageLayerSwitch){var r=t||this.pageSize,a=this.state,s=a.type,c=a.list,d=a.tabList,_={skuIds:(""==s?c:d).slice(e,e+r).filter(function(e){return"good"===e.type}).map(function(e){return String(e.sku)}).join(","),area:f["default"].newArea,canvasType:"1",source:"pc-home"},m="jsonpLayers".concat(String(Math.random()).split(".")[1]),y={appid:"www-jd-com",body:SHA256(JSON.stringify(_)),clientVersion:"1.0.0",client:"pc",functionId:"pctradesoa_getFloatLayer",t:(new Date).getTime(),jsonp:m};return window.PSign.sign(y).then(function(e){var t=Object.assign(y,{h5st:encodeURI(e.h5st),uuid:E["default"].get("__jda"),loginType:3,body:JSON.stringify(_)});return(0,u["default"])(p.GATEWAY,{name:m,params:t}).then(function(e){var t=e.layerList;t.length,t.forEach(function(e){n.floatsDataList.push(e),i["default"].render(o["default"].createElement(P.TempLates,e),document.getElementById("sku-".concat(e.skuId,"-layer-container")))})})["catch"](function(e){(0,l.reportDraError)("b","首页feed流获取浮层获取失败 pctradesoa_getFloatLayer",{error:JSON.stringify(e),url:window.location.href,params:JSON.stringify(_)})})})["catch"](function(e){window.jmfe&&window.jmfe.jsagentReport(window.jmfe.JSAGENT_EXCEPTION_TYPE.net,751,"首页feed流获取浮层失败 pctradesoa_getFloatLayer",{error:JSON.stringify(e)})})}}},{key:"getPrice",value:function getPrice(e,t){var n=this,o=t||this.pageSize,i=this.state,a=i.type,s=i.list,l=i.tabList,c=""==a?s:l,u=c.slice(e,e+o).filter(function(e){return"good"===e.type}).map(function(e){return String(e.sku)});Promise.all([this.getNormalPrice(u,c),this.getYuyueYushouInfo(u,c),this.getChosenStatus(u,c)]).then(function(){var e=_toConsumableArray(c);e.forEach(function(e){"good"===e.type&&-1!==u.indexOf(String(e.sku))&&(e.priceAllReady=!0)}),""==a?n.setState({list:e}):(n.goodsDataCache[a].list=e,n.setState({tabList:e}))})["catch"](function(e){r["default"].error(e)})}},{key:"getNormalPrice",value:function getNormalPrice(e,t){var n=this,o={pin:encodeURIComponent(f["default"].pin),fields:"0000100",skuIds:e.join(","),area:f["default"].area,source:"pc-home"},i="jsonpMorePrice".concat(String(Math.random()).split(".")[1]),r={appid:"www-jd-com",body:SHA256(JSON.stringify(o)),clientVersion:"1.0.0",client:"pc",functionId:"pctradesoa_getprice",t:(new Date).getTime(),jsonp:i};return window.PSign.sign(r).then(function(e){var a=Object.assign(r,{h5st:encodeURI(e.h5st),uuid:E["default"].get("__jda"),loginType:3,body:JSON.stringify(o)});return(0,u["default"])(p.GATEWAY,{name:i,params:a}).then(function(e){e||window.jmfe&&window.jmfe.jsagentReport(window.jmfe.JSAGENT_EXCEPTION_TYPE.business,751,"价格网关接口为空",{fid:"pctradesoa_getprice",url:window.location.href,params:JSON.stringify(o)});var i=_toConsumableArray(t);e.forEach(function(e){var t=Number(e.id.substring(2));i.forEach(function(o){"good"!==o.type||o.sku==t&&(o.isExpose=!0,e.p>0?o.price=e.p:o.price=o.jp,e.tpp>0&&(o.tpp=e.tpp),e.nup>0&&(o.nup=e.nup),n.handleReportExpose(o))})})})["catch"](function(e){window.jmfe&&window.jmfe.jsagentReport(window.jmfe.JSAGENT_EXCEPTION_TYPE.net,751,"价格网关接口异常",{fid:"pctradesoa_getprice",error:JSON.stringify(e),url:window.location.href,params:JSON.stringify(o)})})})["catch"](function(e){window.jmfe&&window.jmfe.jsagentReport(window.jmfe.JSAGENT_EXCEPTION_TYPE.net,751,"首页feed流获取价格加固失败",{error:JSON.stringify(e)})})}},{key:"handleReportExpose",value:function handleReportExpose(e){var t=e.sku,n=e.poi,o=e.originIndex,i=e.isMore,r=e.moreFromIdx,a=e.moreIdx,s=e.ext_columns,c=e.hasCoupon,u=e.promote,f=e.source,p=e.price,_=e.tpp,y=e.nup,h=e.k,g=(0,d.isSkuSelf)(t),b="".concat(n,"#pd"),v=(0,l.padding)((o||h)+1,3);i&&(v="".concat((0,l.padding)(r+1,3),"-").concat((0,l.padding)(a+1,2)));var P="//item.jd.com/".concat(t,".html"),T=s||{},O=c?"02":u?"01":"null",E={0:"02",1:"01"}[f]||"02";T.desc="null-".concat(E,"-").concat(g?"01":"02","-").concat(O,"-").concat(p,"-").concat(_?"01":y?"02":"null");!function sendImpr(){var e=_objectSpread({text:t,url:P},T,{poi:"".concat(b,"|").concat(v)});(0,m.reportExpose)(e)}()}},{key:"validateChosenData",value:function validateChosenData(e){var t=new Error("More_chosen invalid");return e?Promise.resolve(e):Promise.reject(t)}},{key:"validateYuYue",value:function validateYuYue(e){return e?Promise.resolve(e):Promise.reject(new Error("More_yuShouStatus invalid"))}},{key:"markPriceReady",value:function markPriceReady(e,t){t.forEach(function(t){"good"===t.type&&(t.priceReady||-1===e.indexOf(String(t.sku))||(t.priceReady=!0))})}},{key:"getYuyueYushouInfo",value:function getYuyueYushouInfo(e,t){var n=this;if(e&&e.length){for(var o=[],i=_toConsumableArray(e);i.length;)o.push(i.splice(0,20));return Promise.all(o.map(function(e){if(e&&e.length)return(0,S["default"])({functionId:"jsfbox_filterSku_preSaleReservation",name:"jsonpYuYueYuShouStatus".concat(String(Math.random()).split(".")[1]),params:{skuList:e.join(","),source:"pc-home"}}).then(function(o){if(o&&0===o.code){var i=o.data;_toConsumableArray(t).forEach(function(e){var t=String(e.sku);if("good"===e.type){var n=i[t];2===n&&(e.yuYueHidePrice=!0),1===n&&(e.yuShouHidePrice=!0)}})}n.markPriceReady(e,t)})["catch"](function(o){r["default"].error(o),n.markPriceReady(e,t)})}))}}},{key:"getChosenStatus",value:function getChosenStatus(e,t){var n={sku:e.join(","),source:"pc-home",extField:"IsJX,isOverseaPurchase,shop_id,isJxzy,gxlysplx"};return(0,u["default"])(p.GATEWAY,{name:"jsonpMoreChosen".concat(String(Math.random()).split(".")[1]),params:{appid:"www-jd-com",body:JSON.stringify(n),clientVersion:"1.0.0",client:"pc",functionId:"jsfbox_product_ext",t:(new Date).getTime(),uuid:E["default"].get("__jda"),loginType:3}}).then(this.validateChosenData).then(function(n){var o=e.reduce(function(e,t){var o=String(t);return e[o]=n.data[o],e},{});return _toConsumableArray(t).forEach(function(e){if("good"===e.type){var t=String(e.sku),n=o[t];n&&(e.isSelfSku="1"===n.isSelfSku,e.isChosen="1"===n.IsJX,e.isJxzy="1"===n.isJxzy,e.isNewJxzy="3"===n.gxlysplx,e.isOverseaPurchase=n.isOverseaPurchase,e.isHiddenSelfOperator=(0,l.checkIsHiddenSelfOperator)(n.shop_id))}}),o})["catch"](function(){window.jmfe&&window.jmfe.jsagentReport(window.jmfe.JSAGENT_EXCEPTION_TYPE.net,751,"首页Feed获取商品标签失败 jsfbox_product_ext",{fid:"jsfbox_product_ext",params:JSON.stringify(n)})})}},{key:"deleteOne",value:function deleteOne(e){var t=this,n=this.state.list,o=n[e],i="src=pc$action=10$p=610009$id=".concat(o.sku,"$dt=0$fbt=1$fbr=0");(0,_.sendRawImageLog)("//mercury.jd.com/log.gif?t=recfb.000000&m=UA-J2011-1&pin=".concat(encodeURIComponent(encodeURIComponent(f["default"].pin||f["default"].uuid)),"&uid=").concat(f["default"].uuid,"&sid=&v=").concat(encodeURIComponent(i),"&ref=").concat(encodeURIComponent(document.referrer),"&rm=").concat(Date.now())),new Promise(function(e){var n=function getStoreItemList(){return o.source===O.SOURCE_AD?t.storeAdGoodList:t.storeRecommendGoodList},i=n();0===i.length?e(t.prepareData().then(function(){var e=n();return e.length?e.splice(0,1)[0]:(e=t.storeAdGoodList.length?t.storeAdGoodList:t.storeRecommendGoodList).length?e.splice(0,1)[0]:null})):e(i.splice(0,1)[0])}).then(function(o){if(o){o.isReplace=!0;var i=n[e];o.__nervkey=i.__nervkey,n.splice(e,1,o),t.setState({list:n},function(){})}else r["default"].error("没有可替换的内容")})["catch"](function(e){r["default"].error(e)})}},{key:"handleCheckTab",value:function handleCheckTab(e,t){var n=this;this.tabOffsetTop&&$("html, body").scrollTop(this.tabOffsetTop-60),this.setState({type:e,tabIdx:t},function(){""==e&&(n.refreshDomInfo(),setTimeout(function(){n._onScroll()},O.FETCH_PAGE_INTERVAL))}),""!=e&&this.setState({tabList:[],tabIdx:t},function(){n.goodsDataCache[e].list.length>0?n.setState({tabList:n.goodsDataCache[e].list},function(){n.refreshDomInfo()}):n.loadTabPageData(e)})}},{key:"loadTabPageData",value:function loadTabPageData(e){var t=this;this.goodsDataCache[e].loading=!0,this.setState({isTabLoading:!0}),this.getTabData(e).then(function(n){if(n&&n.length){var o=n.length%5;t.goodsDataCache[e].list.length+n.length>=200&&(t.goodsDataCache[e].loadComplete=!0),o>0&&(n=n.slice(0,-o)),t.goodsDataCache[e].list=t.goodsDataCache[e].list.concat(n).slice(0,200),t.setState({tabList:t.goodsDataCache[e].list},function(){t.refreshDomInfo(),t.goodsDataCache[e].pageIndex++,t.goodsDataCache[e].loading=!1})}else t.goodsDataCache[e].loadComplete=!0,t.goodsDataCache[e].loading=!1;t.setState({isTabLoading:!1})})["catch"](function(){t.goodsDataCache[e].loadComplete=!0,t.goodsDataCache[e].loading=!1,t.setState({isTabLoading:!1})})}},{key:"getTabData",value:function getTabData(e){var t=this,n=this.goodsDataCache[e].pageIndex;return new Promise(function(o,i){(0,u["default"])(p.GATEWAY,{name:"jsonpMoreTabGoods",params:{appid:"www-jd-com",body:JSON.stringify({type:e,page:n,limit:O.PAGE_NUMS,pin:f["default"].pin,uuid:f["default"].uuid,source:"pc-home"}),clientVersion:"1.0.0",client:"pc",functionId:"jsfbox_feed_tab",t:(new Date).getTime(),uuid:E["default"].get("__jda"),loginType:3},speedID:4,umpID:6,backup:[p.MORE_TAB_GOODS_BACKUP,p["MORE_TAB_GOODS_BACKUP".concat(e)]],dataCheck:function dataCheck(e){return 0==e.code&&e.data&&e.data.list&&e.data.list.length?!(1==n&&e.data.list.length<25)||(window.jmfe&&window.jmfe.jsagentReport(window.jmfe.JSAGENT_EXCEPTION_TYPE.business,751,"jsfbox_feed_tab 校验失败 pageIndex",{fid:"jsfbox_feed_tab"}),!1):(window.jmfe&&window.jmfe.jsagentReport(window.jmfe.JSAGENT_EXCEPTION_TYPE.business,751,"jsfbox_feed_tab 校验失败 code非0",{fid:"jsfbox_feed_tab"}),!1)}}).then(function(e){var i=t;if((e.__$$backupCall||e.code)&&n>1)return window.jmfe&&window.jmfe.jsagentReport(window.jmfe.JSAGENT_EXCEPTION_TYPE.business,751,"pc_home_feed_tab 2+ 页直接不展示兜底",{fid:"pc_home_feed_tab"}),void o([]);var r=e.data&&e.data.list.length&&e.data.list.length>0&&e.data.list.map(function(e){return{sku:e.productBaseInfo.skuId,price:e.productBaseInfo.pPrice||e.productBaseInfo.jdPrice,t:e.productBaseInfo.name,img:(0,c["default"])(e.productBaseInfo.image,_objectSpread({},t.goodImageOpts)),tpp:e.productBaseInfo.plusPrice,clk:"",isOverseaPurchase:e.productBaseInfo.isOverseaPurchase,source:"0",type:"good",isMore:!1}})||[];(e.data.priceList||[]).forEach(function(e){var t=Number(e.id.substring(2));r.forEach(function(n){n.sku==t&&(n.isExpose=!0,e.p>0?n.price=e.p:n.price=n.jp,e.tpp>0&&(n.tpp=e.tpp),e.nup>0&&(n.nup=e.nup),i.handleReportExpose(n))})});var a=e.data.yushouFilterSku||{},s=e.data.productMap||{},u=e.data.promotionMap||{},f=e.floatLayerList||[];r.forEach(function(e){e.priceAllReady=!0,e.priceReady=!0;var t=String(e.sku),n=a[t];2===n&&(e.yuYueHidePrice=!0),1===n&&(e.yuShouHidePrice=!0);var o=s[t];o&&(e.isSelfSku="1"===o.isSelfSku,e.isChosen="1"===o.IsJX,e.isJxzy="1"===o.isJxzy,e.isNewJxzy="3"===o.gxlysplx,e.isOverseaPurchase=o.isOverseaPurchase,e.isHiddenSelfOperator=(0,l.checkIsHiddenSelfOperator)(o.shop_id));var i=u[t];i&&(e.tailTag=i),f.forEach(function(n){n.skuId==t&&(e.floatLayerData=n)})}),o(r)})["catch"](function(e){window.jmfe&&window.jmfe.jsagentReport(window.jmfe.JSAGENT_EXCEPTION_TYPE.net,751,"pc_home_feed_tab 接口出错",{fid:"pc_home_feed_tab",error:JSON.stringify(e)}),i(e)})})}},{key:"renderLoading",value:function renderLoading(){var e=function loading(e){return o["default"].createElement("em",{style:{backgroundColor:e}})};return o["default"].createElement("div",{className:"more2_loading"},e("#585857"),e("#969796"),e("#D1D2D0"))}},{key:"render",value:function render(){var e=this;if(this.state.hide)return"";try{if(!this.state.loaded)return o["default"].createElement(h["default"],null);var t=this.state,n=t.cursor,i=t.list,a=t.isLoadingFirst,s=t.isSkusBackup,l=t.isLoadComplete,c=t.tabList,u=t.tabIdx,f=t.type,d=t.showFixTab,p=t.isTabLoading;return o["default"].createElement("div",{className:"more2",ref:function ref(t){e.moreNode=t}},o["default"].createElement(y["default"],{title:"为你推荐"}),o["default"].createElement(T["default"],{ref:function ref(t){e.tabNode=t},checkTab:function checkTab(t,n){return e.handleCheckTab(t,n)},active:f}),d&&o["default"].createElement(T["default"],{checkTab:function checkTab(t,n){return e.handleCheckTab(t,n)},tabClass:"feed-tab-wrapper--fixed",active:f}),a?o["default"].createElement(g["default"],null):o["default"].createElement("div",{className:"grid_c1 more2_inner",clstag:"a"},""==f&&i&&i.length&&o["default"].createElement("div",null,o["default"].createElement("ul",{id:"feedContent".concat(u),className:"more2_list clearfix",role:"tabpanel","aria-labelledby":"feedTab".concat(u)},i.slice(0,n).map(function(t,n){if(t.k=n,"good"==t.type)return t.poi="feed|0".concat(Number(f)+1),t.deletable=!s&&t.deletable,o["default"].createElement(b["default"],_extends({},t,{key:"g_".concat(t.__nervkey),deleteOne:function deleteOne(){e.deleteOne(n)}}));t.poi="feed|01";var i={type:t.type,k:t.k,poi:t.poi,data:t.data,originIndex:t.originIndex,__nervkey:t.__nervkey};return o["default"].createElement(v["default"],_extends({},i,{key:"a_".concat(t.__nervkey)}))})),!s&&!l&&this.renderLoading()),""!=f&&(c&&c.length?o["default"].createElement("div",null,o["default"].createElement("ul",{id:"feedContent".concat(u),className:"more2_list clearfix",role:"tabpanel","aria-labelledby":"feedTab".concat(u)},c.map(function(e,t){return e.k=t,e.poi="".concat("6"===f?"compfeed":"feed","|").concat({1:"02",3:"03",4:"04",2:"05",5:"06",6:"07"}[f]),e.deletable=!1,e.extendable=!1,o["default"].createElement(b["default"],_extends({},e,{key:"g_".concat(e.__nervkey)}))})),p&&this.renderLoading()):o["default"].createElement(g["default"],null))))}catch(m){var _=this.props.onError;return _&&_(),r["default"].error(m),""}}}]),Feed}();t["default"]=C},V5Un:function(e,t,n){},"Y+8k":function(e,t,n){},fIwX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,n("rE2o"),n("ioFf"),n("/SS/"),n("KKXr");var o=_interopRequireDefault(n("L6Ds")),i=_interopRequireDefault(n("aP5i"));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function adJustPriceFontSize(e,t,n){var o=function getPriceTextSpanWidth(e,t){var n=document.createElement("span"),o=["prefixPriceFontSize","priceFontSize","suffixPriceFontSize"];e.map(function(e,i){var r=document.createElement("span");r.style.fontSize=t[o[i]]+"px",r.style.fontFamily=t.fontFamily,r.style.fontWeight=t.fontWeight,r.innerText=e,n.appendChild(r)}),n.style.position="absolute",document.body.appendChild(n);var i=n.offsetWidth;return document.body.removeChild(n),i}(e,n),i=1;return o>t?(i=t/o)>n.minFontSize/n.fontSize?i:n.minFontSize/n.fontSize:i}function adJustFontSize(e,t,n,o,i,r){var a=function getTextSpanWidth(e,t,n,o){var i=document.createElement("span");i.style.fontSize=t+"px",i.style.fontFamily=n,i.style.fontWeight=o,i.innerHTML=e,i.style.position="absolute",document.body.appendChild(i);var r=i.offsetWidth;return document.body.removeChild(i),r}(n,e,i,r);return a>o?(e*=o/a)>t?e:t:e}var r=function(e){function Layer(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Layer),_possibleConstructorReturn(this,_getPrototypeOf(Layer).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Layer,i["default"].Component),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(Layer,[{key:"componentDidMount",value:function componentDidMount(){}},{key:"render",value:function render(){var e=this.props,t="string"==typeof e.text?[e.text]:e.text;if("TEXT"===e.type){var n=null,o="none";if("true"===e.textStyle.underline&&(o="true"===e.textStyle.lineThrough?"underline line-through":"underline"),e.textStyle.price){var r=[],a=adJustPriceFontSize(r=2===t[0].split("￥")[1].split(".").length?["￥",t[0].split("￥")[1].split(".")[0],"."+t[0].split("￥")[1].split(".")[1]]:["￥",t[0].split("￥")[1],""],e.w,e.textStyle);n=i["default"].createElement("span",{style:{textDecoration:o}},["prefixPriceFontSize","priceFontSize","suffixPriceFontSize"].map(function(t,n){return i["default"].createElement("span",{style:{fontSize:e.textStyle[t]*a}},r[n])}))}else{var s=adJustFontSize(e.textStyle.fontSize,e.textStyle.minFontSize,1===e.textStyle.maxLines?t.join("&nbsp;"):t.join("<br/>"),e.w,e.textStyle.fontFamily,e.textStyle.fontWeight);n=i["default"].createElement("span",{style:{textDecoration:o,fontSize:s},dangerouslySetInnerHTML:{__html:1===e.textStyle.maxLines?t.join("&nbsp;"):t.join("<br/>")}})}var l=e.textStyle.lineHeight;return 2==e.textStyle.maxLines&&1==t.length&&(l=e.h+"px"),1==e.textStyle.maxLines&&(l=e.h+"px"),i["default"].createElement("div",{style:{position:"absolute",zIndex:e.zIndex,left:e.x,top:e.y,width:e.w,height:e.h,opacity:e.opacity,textAlign:e.textStyle.textAlign,letterSpacing:e.textStyle.letterSpacing,fontStyle:e.textStyle.fontStyle,fontWeight:e.textStyle.fontWeight,lineHeight:l,fontFamily:e.textStyle.fontFamily,color:e.textStyle.color,whiteSpace:1===e.textStyle.maxLines?"nowrap":"normal"}},n)}if("IMAGE"===e.type)return i["default"].createElement("img",{style:{position:"absolute",zIndex:e.zIndex,left:e.x,top:e.y,width:e.w,height:e.h,opacity:e.opacity},src:e.issUrl})}}]),Layer}(),a=(0,o["default"])(r);t["default"]=a},mreV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,n("rE2o"),n("ioFf"),n("/SS/");var o=_interopRequireDefault(n("aP5i")),i=_interopRequireDefault(n("aP5i")),r=_interopRequireDefault(n("oP/V"));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n("V5Un");var a=function(e){function Lazyimg(e){var t;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Lazyimg),_defineProperty(_assertThisInitialized(_assertThisInitialized(t=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(Lazyimg).call(this,e)))),"loaded",!1),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"retryCount",0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"imgDom",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"ctnDom",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"retryTimer",void 0),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"getCtnRef",function(e){var n=i["default"].findDOMNode(e);n&&(t.ctnDom=n)}),_defineProperty(_assertThisInitialized(_assertThisInitialized(t)),"getImgRef",function(e){var n=i["default"].findDOMNode(e);n&&(t.imgDom=n)}),t.load=t.load.bind(_assertThisInitialized(_assertThisInitialized(t))),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Lazyimg,o["default"].Component),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(Lazyimg,[{key:"done",value:function done(){var e=this.props.src,t=this.props.className;this.imgDom&&(this.imgDom.src=e),this.ctnDom&&(this.ctnDom.className=(0,r["default"])("lazyimg","lazyimg_loaded",t))}},{key:"error",value:function error(){var e=this.props.errSrc,t=this.props.className;this.imgDom&&(this.imgDom.src=e,"dataset"in this.imgDom&&(this.imgDom.dataset.src=this.props.src)),this.ctnDom&&(this.ctnDom.className=(0,r["default"])("lazyimg","lazyimg_loaded","lazyimg_error",t))}},{key:"load",value:function load(e){var t=this;clearTimeout(this.retryTimer);var n=new Image,o=!1,i=n.onload=function(){o?n.onload=null:(t.done(),o=!0,n.onload=null)};n.onerror=function(){n.onerror=null,t.retryCount<(t.props.retryTimes||2)?t.retryTimer=window.setTimeout(function(){t.retryCount++,t.load(e)},10):t.error()},n.src=e,n.complete&&i()}},{key:"componentDidMount",value:function componentDidMount(){this.load(this.props.src)}},{key:"componentWillReceiveProps",value:function componentWillReceiveProps(e){e.src!==this.props.src&&(this.retryCount=0,this.load(e.src))}},{key:"render",value:function render(){var e=this.props,t=e.lazySrc,n=e.className,i=e.alt;return o["default"].createElement("div",{ref:this.getCtnRef,className:(0,r["default"])("lazyimg",n)},o["default"].createElement("img",{src:t,ref:this.getImgRef,className:"lazyimg_img",alt:i}))}}]),Lazyimg}();_defineProperty(a,"defaultProps",{lazySrc:"//misc.360buyimg.com/mtd/pc/common/img/blank.png",src:"//misc.360buyimg.com/mtd/pc/common/img/blank.png",errSrc:"//misc.360buyimg.com/mtd/pc/common/img/blank.png"});var s=a;t["default"]=s},pHFl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,n("rE2o"),n("ioFf"),n("/SS/");var o=function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}(n("aP5i"));function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}n("uwU0");var i=function(e){function FloorHd(){return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FloorHd),_possibleConstructorReturn(this,_getPrototypeOf(FloorHd).apply(this,arguments))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FloorHd,o["default"].Component),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(FloorHd,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(){return!1}},{key:"render",value:function render(){var e=this.props.title;return o["default"].createElement("div",{className:"floorhd"},o["default"].createElement("div",{className:"grid_c1 floorhd_inner"},null==e||""===e?o["default"].createElement("h3",{className:"floorhd_tit_empty"}):o["default"].createElement("h3",{className:"floorhd_tit"},e)))}}]),FloorHd}();t["default"]=i},q63S:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0,n("rE2o"),n("ioFf"),n("/SS/");var o=_interopRequireDefault(n("aP5i")),i=_interopRequireDefault(n("oP/V")),r=n("Ykg6"),a=n("n5if"),s=n("SjJ/"),l=n("+uuy");function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n("hGIe"),n("Y+8k");var c=function(e){function FeedTab(){var e,t,n;!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FeedTab);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return _possibleConstructorReturn(n,(t=n=_possibleConstructorReturn(this,(e=_getPrototypeOf(FeedTab)).call.apply(e,[this].concat(i))),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"tabs",[]),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"selectedTabIdx",0),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"curTabIdx",0),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"onKeyDown",function(e){(0,l.handleKeydown)(e,{leftCallback:n.handleKeyLeft,rightCallback:n.handleKeyRight,tabCallback:n.handleKeyTab})}),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"handleKeyLeft",function(){n.curTabIdx-=1,n.curTabIdx<0&&(n.curTabIdx=s.TAB_DATA.length-1);var e=n.tabs[n.curTabIdx];e&&e.focus()}),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"handleKeyRight",function(){n.curTabIdx+=1,n.curTabIdx>s.TAB_DATA.length&&(n.curTabIdx=0);var e=n.tabs[n.curTabIdx];e&&e.focus()}),_defineProperty(_assertThisInitialized(_assertThisInitialized(n)),"handleKeyTab",function(){n.curTabIdx=n.selectedTabIdx}),t))}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FeedTab,o["default"].Component),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(FeedTab,[{key:"render",value:function render(){var e=this,t=this.props.active,n={tabItem:function tabItem(e){return(0,i["default"])("feed-tab__item",{"feed-tab__item--active":t===e})},tabWrapper:"grid_c1 feed-tab-wrapper ".concat(this.props.tabClass)};return o["default"].createElement("div",{className:n.tabWrapper},o["default"].createElement("ul",{className:"feed-tab",onKeyDown:this.onKeyDown},s.TAB_DATA.map(function(i,s){var l=i.title,c=i.subtitle;return t===i.type&&(e.selectedTabIdx=s,e.curTabIdx=s),o["default"].createElement("li",{id:"feedTab".concat(s),className:n.tabItem(i.type),key:s,clstag:"".concat(r.CLSTAGPREFIX).concat("6"===i.type?"compfeed":"feed","|top_").concat(i.poi),onClick:function onClick(){(0,a.reportClick)({poi:"".concat("6"===i.type?"compfeed":"feed","|top|").concat(i.poi),text:i.title}),e.props.checkTab(i.type,s)},ref:function ref(t){e.tabs[s]=t},tabIndex:t===i.type?0:-1,"aria-label":"".concat(l," ").concat(c),role:"tab","aria-selected":t===i.type,"aria-controls":"feedContent".concat(s)},o["default"].createElement("div",{className:"feed-tab__item-title"},o["default"].createElement("span",{className:"feed-tab__item-title-text"},l)),o["default"].createElement("div",{className:"feed-tab__item-desc"},c),5!==s&&o["default"].createElement("div",{className:"feed-tab__item-gap"}))})))}}]),FeedTab}();_defineProperty(c,"defaultProps",{checkTab:function checkTab(){},active:"",tabClass:""});var u=c;t["default"]=u},uwU0:function(e,t,n){},wP27:function(e,t,n){}}]);